webpackJsonp([10],{563:function(a,b,c){c(708);var d=c(217)(c(839),c(690),null,null);a.exports=d.exports},658:function(a,b,c){b=a.exports=c(91)(void 0),b.push([a.i,".user-icon{width:20px}.btngroup2{margin-top:10px}",""])},690:function(a){a.exports={render:function(){var c=this,d=c.$createElement,e=c._self._c||d;return e("div",{staticClass:"table"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-menu"}),c._v("\u5B66\u751F")]),c._v(" "),e("el-breadcrumb-item",[c._v("\u5B66\u751F\u5206\u7EC4")])],1)],1),c._v(" "),e("el-transfer",{attrs:{filterable:!0,titles:["\u6240\u6709\u5B66\u751F","\u5206\u7EC4\u5B66\u751F"],"button-texts":["\u4ECE\u5206\u7EC4\u79FB\u9664","\u6DFB\u52A0\u5230\u5206\u7EC4"],data:c.currentTransferData},model:{value:c.currentTransValue,callback:function(f){c.currentTransValue=f},expression:"currentTransValue"}}),c._v(" "),e("el-button-group",{staticClass:"btngroup2"},[e("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9\u7F16\u8F91\u7684\u5206\u7EC4"},on:{change:c.handerChangeGroup},model:{value:c.currentEditGroupId,callback:function(f){c.currentEditGroupId=f},expression:"currentEditGroupId"}},c._l(c.studentGroupList,function(f){return e("el-option",{key:f.id,attrs:{label:f.name,value:f.id}})})),c._v(" "),e("el-badge",{staticClass:"item",attrs:{"is-dot":c.isUnsave}},[e("el-button",{attrs:{icon:"upload",type:"success"},on:{click:function(){c.handleSave()}}},[c._v("\u4FDD\u5B58\u4FEE\u6539")])],1)],1)],1)},staticRenderFns:[]}},708:function(a,b,c){var d=c(658);"string"==typeof d&&(d=[[a.i,d,""]]),d.locals&&(a.exports=d.locals);c(216)("ea327426",d,!0)},839:function(a,b,c){"use strict";function d(g,h){return g.find(function(i){return i.id==h})}Object.defineProperty(b,"__esModule",{value:!0});var e=c(218),f=c.n(e);b["default"]={data:function(){return{currentEditGroupId:"",studentGroupList:[],studentList:[],groupChangedDatas:[],studentChangedDatas:[],currentTransferData:[],currentTransValue:[]}},computed:{isUnsave:function(){return this.currentEditGroupId&&this.currentTransValue.join(",")!=(d(this.studentGroupList,this.currentEditGroupId).studentIds||"")}},created:function(){var h=this;this.$axios.post(this.AppStaticParams.mainUrl+"/group",{rows:1e3}).then(function(i){return 0>=i.data.list.length?void h.$router.push("/studentmgr"):void(h.studentGroupList=i.data.list,h.currentEditGroupId=h.studentGroupList[0].id,h.getData())}).catch(function(i){return console.log(i)})},methods:{getData:function(){var h=this;this.$axios.post("/api/users",{rows:333,mgrid:1}).then(function(i){h.studentList=i.data.list;var j=[];h.studentList.forEach(function(k){j.push({label:k.realname,key:k.id})}),h.currentTransferData=j})},formatter:function(h){return h.address},filterTag:function(h,i){return i.tag===h},handleEdit:function(h,i){var j=f.a.extend({},i);j.groupIds=j.groupIds?j.groupIds.split(","):[],this.dialogFormVisible=!0,this.editingData=j,this.editRowIndex=h},handleCancleEdit:function(){this.editRowIndex=-1,this.dialogFormVisible=!1},handleFromConfirm:function(){var h=this,i=this;this.$refs.editForm.validate(function(j){return j?(-1===i.editRowIndex?(i.editingData.__status="add",i.tableData.push(i.editingData),i.changedDatas.push(i.editingData)):(!i.editingData.__status&&(i.editingData.__status="update",i.changedDatas.push(i.editingData)),console.log(i.editRowIndex,i.editingData),f.a.extend(i.tableData[i.editRowIndex],f.a.clone(i.editingData)),i.tableData[i.editRowIndex].groupIds=i.editingData.groupIds.join(",")),h.editRowIndex=-1,i.dialogFormVisible=!1,!0):(console.log("error submit!!"),!1)})},handleDelete:function(h,i){0!==i.id&&i.id?(i.__status="delete",-1==this.changedDatas.indexOf(i)&&this.changedDatas.push(i)):this.changedDatas=f.a.without(this.changedDatas,i),this.tableData=f.a.without(this.tableData,i),this.editRowIndex=-1},handleAdd:function(){if(-1==this.editRowIndex){this.editingData={mgrid:1,groupIds:[]},this.dialogFormVisible=!0}},handerChangeGroup:function(){var h=this;if(-1!=h.currentEditGroupId){var i=d(h.studentGroupList,h.currentEditGroupId).studentIds||"";h.currentTransValue=i?i.split(",").map(function(j){return+j}):[]}},handleSave:function(){var h=this;if(!h.isUnsave)return void h.$message.info("\u5F53\u524D\u6570\u636E\u6CA1\u6709\u4FEE\u6539\uFF0C\u4E0D\u9700\u8981\u4FDD\u5B58");var i=d(h.studentGroupList,h.currentEditGroupId);i.studentIds=h.currentTransValue.join(","),h.$axios.post(h.AppStaticParams.mainUrl+"/group/save",i).then(function(j){j.data.success?h.$message.info(j.data.msg):console.log(j.data),h.changedDatas=[]}).catch(function(j){h.$message.error("\u4FDD\u5B58\u51FA\u9519"),console.log(j)})}}}}});