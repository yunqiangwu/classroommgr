webpackJsonp([9],{562:function(a,b,c){c(709);var d=c(217)(c(838),c(692),null,null);a.exports=d.exports},659:function(a,b,c){b=a.exports=c(91)(void 0),b.push([a.i,".user-icon{width:20px}.btngroup{float:right;margin-bottom:10px}",""])},692:function(a){a.exports={render:function(){var c=this,d=c.$createElement,e=c._self._c||d;return e("div",{staticClass:"table"},[e("div",{staticClass:"crumbs"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[e("i",{staticClass:"el-icon-menu"}),c._v("\u5B66\u751F")]),c._v(" "),e("el-breadcrumb-item",[c._v("\u5206\u7EC4\u7BA1\u7406")])],1)],1),c._v(" "),e("el-button-group",{staticClass:"btngroup"},[e("el-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(){c.handleAdd()}}},[c._v("\u65B0\u589E\u5206\u7EC4")]),c._v(" "),e("el-badge",{staticClass:"item",attrs:{value:c.changedDatas.length}},[e("el-button",{attrs:{icon:"upload",type:"success"},on:{click:function(){c.handleSave()}}},[c._v("\u4FDD\u5B58\u4FEE\u6539")])],1)],1),c._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:c.tableData,border:""}},[e("el-table-column",{attrs:{prop:"id",label:"\u5206\u7EC4\u7F16\u53F7",sortable:"",formatter:c.formatterId}}),c._v(" "),e("el-table-column",{attrs:{prop:"name",label:"\u5206\u7EC4\u540D\u79F0",sortable:""},scopedSlots:c._u([{key:"default",fn:function(f){return[c.editRowIndex==f.$index?e("el-input",{nativeOn:{keyup:function(g){return!("button"in g)&&c._k(g.keyCode,"enter",13)?null:void c.handleInputConfirm(f.$index,f.row)}},model:{value:c.editingData.name,callback:function(g){c.editingData.name=g},expression:"editingData.name"}}):e("span",[c._v(c._s(f.row.name))])]}}])}),c._v(" "),e("el-table-column",{attrs:{prop:"studentIds",label:"\u5B66\u751F\u6570\u91CF",formatter:c.formatter}}),c._v(" "),e("el-table-column",{attrs:{label:"\u64CD\u4F5C",width:"240"},scopedSlots:c._u([{key:"default",fn:function(f){return[c.editRowIndex==f.$index?e("el-button",{attrs:{size:"small"},on:{click:function(){c.handleCancleEdit(f.$index,f.row)}}},[c._v("\u53D6\u6D88")]):e("el-button",{attrs:{size:"small"},on:{click:function(){c.handleEdit(f.$index,f.row)}}},[c._v("\u7F16\u8F91")]),c._v(" "),c.editRowIndex==f.$index?e("el-button",{attrs:{size:"small"},on:{click:function(){c.handleInputConfirm(f.$index,f.row)}}},[c._v("\u786E\u5B9A")]):c._e(),c._v(" "),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(){c.handleDelete(f.$index,f.row)}}},[c._v("\u5220\u9664")])]}}])})],1),c._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"page-size":c.pageSize,layout:"prev, pager, next",total:c.total},on:{"current-change":c.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},709:function(a,b,c){var d=c(659);"string"==typeof d&&(d=[[a.i,d,""]]),d.locals&&(a.exports=d.locals);c(216)("b0c8c878",d,!0)},838:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(218),e=c.n(d);b["default"]={data:function(){return{tableData:[],cur_page:1,pageSize:9,total:1e3,editRowIndex:-1,changedDatas:[],editingData:{name:"",id:""}}},created:function(){this.getData()},methods:{handleCurrentChange:function(g){this.cur_page=g,this.getData()},getData:function(){var g=this;return this.$axios.post(this.AppStaticParams.mainUrl+"/group",{page:g.cur_page,rows:g.pageSize}).then(function(h){g.tableData=h.data.list,g.total=h.data.total})},formatter:function(g){return g.studentIds?g.studentIds.split(",").length:0},formatterId:function(g){return g.id||"\u65B0\u5206\u7EC4"},handleEdit:function(g,h){this.$message("\u7F16\u8F91\u7B2C"+(g+1)+"\u884C"),this.editingData.name=h.name,this.editingData.id=h.id,this.editRowIndex=g},handleCancleEdit:function(g,h){0!==h.id&&h.id?this.editRowIndex=-1:-1==this.changedDatas.indexOf(h)?this.handleDelete(g,h):this.editRowIndex=-1},handleInputConfirm:function(g,h){return this.editingData.name&&""!=this.editingData.name.trim()?(h.name=this.editingData.name,h.__status=0!==h.id&&h.id?"update":"add",-1==this.changedDatas.indexOf(h)&&this.changedDatas.push(h),this.editRowIndex=-1,!0):void this.$message.error("\u5206\u7EC4\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A")},handleDelete:function(g,h){0!==h.id&&h.id?(h.__status="delete",-1==this.changedDatas.indexOf(h)&&this.changedDatas.push(h)):this.changedDatas=e.a.without(this.changedDatas,h),this.tableData=e.a.without(this.tableData,h),this.editRowIndex=-1},handleAdd:function(){if(-1==this.editRowIndex){var g={name:"",mgrid:1};this.tableData.push(g);var h=this.tableData.indexOf(g);this.handleEdit(h,g)}},handleSave:function(){var g=this;return-1==g.editRowIndex?0>=g.changedDatas.length?void g.$message.info("\u5F53\u524D\u6570\u636E\u6CA1\u6709\u4FEE\u6539\uFF0C\u4E0D\u9700\u8981\u4FDD\u5B58"):void g.$axios.post(g.AppStaticParams.mainUrl+"/group/submit",g.changedDatas).then(function(h){h.data.success?g.$message.info("\u6210\u529F\u66F4\u65B0 "+h.data.list.length+" \u6761\u6570\u636E"):console.log(h.data),g.getData(),g.changedDatas=[]}).catch(function(h){g.$message.error("\u4FDD\u5B58\u51FA\u9519"),console.log(h)}):void g.$message.error("\u8BF7\u5148\u5B8C\u6210\u7F16\u8F91\u64CD\u4F5C")}}}}});